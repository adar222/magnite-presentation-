<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide 7 - Code 63 Trend</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background: #000;
            color: #fff;
            font-family: 'Poppins', Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 82vw;
            max-width: 1100px;
            margin: 0 auto;
            padding-top: 36px;
            padding-bottom: 8px;
        }
        h1 {
            color: #00FF85;
            font-size: 2.1rem;
            margin-bottom: 18px;
            text-align: center;
            font-weight: 700;
        }
        #slide7-chart {
            background: #191919;
            border-radius: 18px;
            box-shadow: 0 2px 14px 0 rgba(0,0,0,0.18);
            padding: 26px 18px 10px 18px;
        }
        @media (max-width: 900px) {
            .container { width: 98vw; }
            #slide7-chart { width: 95vw !important; }
            h1 { font-size: 1.1rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Ad Requests & Code 63 Rate<br><span style="font-size:1.2rem;font-weight:500;">(July 1â€“26, 2025)</span></h1>
        <canvas id="slide7-chart" width="1080" height="410"></canvas>
    </div>
    <script>
        const labels = [
          "01/07", "02/07", "03/07", "04/07", "05/07", "06/07", "07/07", "08/07", "09/07", "10/07", "11/07", "12/07", "13/07", "14/07", "15/07", "16/07", "17/07", "18/07", "19/07", "20/07", "21/07", "22/07", "23/07", "24/07", "25/07", "26/07"
        ];
        const totalRequests = [
            11727303054,11839331693,11298875353,10076843878,10536898684,11660106261,9743823944,6803798587,8545617418,8037564679,7386775378,6784234872,6229619796,4200062509,3216323857,2858945620,2735327563,2627372155,2959016993,3328924515,2933595990,2704850197,4637789983,6398835794,4629234455,4959410662
        ];
        const code63Rate = [21,21,19,19,19,20,22,26,24,25,26,24,25,20,10,11,13,11,14,10,10,12,12,11,11,13];
        // Convert totals to billions for compact y-axis
        const totalRequestsB = totalRequests.map(x => x / 1e9);
        
        const ctx = document.getElementById('slide7-chart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [
                    {
                        type: 'bar',
                        label: 'Ad Requests (B)',
                        data: totalRequestsB,
                        backgroundColor: '#00FF85',
                        borderRadius: 8,
                        barThickness: 18,
                        yAxisID: 'y',
                    },
                    {
                        type: 'line',
                        label: 'Code 63 Rate (%)',
                        data: code63Rate,
                        borderColor: '#FFD600',
                        backgroundColor: '#FFD600',
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        borderWidth: 4,
                        fill: false,
                        yAxisID: 'y1',
                        tension: 0.38
                    }
                ]
            },
            options: {
                responsive: false,
                plugins: {
                    legend: { display: true, labels: { color: '#fff', font: { size: 15 } } },
                    tooltip: { mode: 'index', intersect: false },
                },
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Date (July 2025)',
                            color: '#fff',
                            font: { size: 15, weight: 700 }
                        },
                        ticks: {
                            color: '#fff',
                            font: { size: 14 }
                        },
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        type: 'linear',
                        position: 'left',
                        title: {
                            display: true,
                            text: 'Total Ad Requests (Billions)',
                            color: '#00FF85',
                            font: { size: 14, weight: 700 }
                        },
                        beginAtZero: true,
                        min: 0,
                        max: 13,
                        ticks: {
                            color: '#00FF85',
                            font: { size: 14 },
                            stepSize: 2
                        },
                        grid: {
                            color: '#233'
                        }
                    },
                    y1: {
                        type: 'linear',
                        position: 'right',
                        min: 0,
                        max: 30,
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Code 63 Rate (%)',
                            color: '#FFD600',
                            font: { size: 14, weight: 700 }
                        },
                        ticks: {
                            color: '#FFD600',
                            font: { size: 14 },
                            stepSize: 5,
                            callback: function(value) { return value + '%'; }
                        },
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
